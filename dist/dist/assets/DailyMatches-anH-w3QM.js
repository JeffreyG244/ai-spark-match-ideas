import{j as e}from"./vendor-ui-BOBT-NyQ.js";import{r as d}from"./vendor-LxWyOK1e.js";import{f as L,H as w,X as A,b as v,B as m,t as C,u as E,S as P,e as y,c as R,d as T}from"./index-DNN11rcK.js";import{L as D}from"./vendor-router-hC09K-xx.js";import{u as z}from"./useDailyMatches-CE4Z3iyd.js";import{m as M,u as I,A as B}from"./proxy-DGdb_Zx0.js";import{P as G}from"./progress-C7g_ahGs.js";import{M as F}from"./map-pin-L6qCbcXL.js";import{S as O}from"./star-DzkWTCKw.js";import{L as Y}from"./logo-CkB_3k13.js";import{A as _}from"./arrow-left-dGaAc19p.js";import{S as $}from"./settings-Cb-axX_H.js";import{R as k}from"./refresh-cw-C9cidl9b.js";import{S as H}from"./sparkles-KZkEvEzW.js";import"./vendor-supabase-DciMRLNE.js";import"./vendor-query-BXVzPZ54.js";const V=({score:t,showLabel:o=!0})=>{const a=l=>l>=80?"Excellent Match":l>=60?"Good Match":l>=40?"Fair Match":"Low Compatibility",s=l=>l>=80?"bg-green-100 text-green-800":l>=60?"bg-yellow-100 text-yellow-800":l>=40?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800";return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Compatibility"}),e.jsxs("span",{className:"text-sm font-bold text-purple-600",children:[t,"%"]})]}),e.jsx(G,{value:t,className:"h-2",style:{background:"#f3f4f6"}}),o&&e.jsx(L,{variant:"secondary",className:`text-xs ${s(t)}`,children:a(t)})]})},q=({dragX:t,isVisible:o})=>{const a=Math.max(0,Math.min(1,t/100)),s=Math.max(0,Math.min(1,-t/100));return o?e.jsxs("div",{className:"absolute inset-0 pointer-events-none z-10",children:[e.jsx(M.div,{className:"absolute top-20 right-6 bg-emerald-500 text-white rounded-full p-4 shadow-2xl",style:{opacity:a},animate:{scale:a>.3?1.2:1,rotate:a>.5?15:0},children:e.jsx(w,{className:"h-8 w-8 fill-current"})}),e.jsx(M.div,{className:"absolute top-20 left-6 bg-red-500 text-white rounded-full p-4 shadow-2xl",style:{opacity:s},animate:{scale:s>.3?1.2:1,rotate:s>.5?-15:0},children:e.jsx(A,{className:"h-8 w-8"})}),e.jsx("div",{className:"absolute bottom-20 left-1/2 transform -translate-x-1/2",children:e.jsx("div",{className:"bg-black/70 text-white px-4 py-2 rounded-full text-sm font-medium",children:t>50?"ðŸ’š Like":t<-50?"ðŸ’” Pass":"Swipe Left/Right"})})]}):null},U=({match:t,onSwipe:o})=>{const[a,s]=d.useState(null),[l,g]=d.useState(0),[h,p]=d.useState(!1),{recordSwipe:j,isLoading:x}=I();if(!t.user_profile)return null;const c=t.user_profile,u=c.first_name||"User",f=c.age||25,b=c.photos&&c.photos.length>0?c.photos[0]:"https://images.unsplash.com/photo-1494790108755-2616c2b10db8?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=60",n=async i=>{if(!x){s(i);try{await j(c.id,i),i==="like"&&C({title:"ðŸ’– Great choice!",description:`You liked ${u}. They'll be notified if it's a match!`}),setTimeout(()=>{o(i),s(null)},300)}catch{C({title:"Error",description:"Failed to record swipe. Please try again.",variant:"destructive"}),s(null)}}},N=(i,r)=>{const S=Math.abs(r.velocity.x);r.offset.x>100||S>500&&r.offset.x>50?n("like"):(r.offset.x<-100||S>500&&r.offset.x<-50)&&n("pass"),g(0),p(!1)};return e.jsxs("div",{className:"relative w-full max-w-sm mx-auto",children:[e.jsxs(M.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0,x:a==="like"?400:a==="pass"?-400:0,rotate:a==="like"?20:a==="pass"?-20:0,transition:{duration:.4,ease:"easeInOut"}},drag:"x",dragConstraints:{left:-100,right:100},dragElastic:.3,onDragEnd:N,onDrag:(i,r)=>{g(r.offset.x),p(Math.abs(r.offset.x)>10)},onDragStart:()=>p(!0),whileDrag:{rotate:l*.1,scale:1.05,cursor:"grabbing",zIndex:10},className:"cursor-grab active:cursor-grabbing",children:[e.jsx(v,{className:"border-purple-200 overflow-hidden shadow-xl bg-gradient-to-br from-white to-purple-50",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"aspect-[3/4] overflow-hidden",children:e.jsx("img",{src:b,alt:u,className:"w-full h-full object-cover",onError:i=>{const r=i.currentTarget;r.src="https://images.unsplash.com/photo-1494790108755-2616c2b10db8?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=60"}})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-2xl font-bold",children:[u,", ",f]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(F,{className:"h-4 w-4 opacity-80"}),e.jsx("span",{className:"text-sm opacity-90",children:"San Francisco, CA"})]})]}),e.jsxs(L,{className:"bg-green-500/20 text-green-100 border-green-400/30",children:[e.jsx(O,{className:"h-3 w-3 mr-1 fill-current"}),"New"]})]}),e.jsx("div",{className:"mb-4",children:e.jsx(V,{score:t.compatibility_score})}),c.bio&&e.jsx("p",{className:"text-white/90 text-sm line-clamp-2 leading-relaxed",children:c.bio})]})]})}),e.jsx(q,{dragX:l,isVisible:h})]}),e.jsxs("div",{className:"flex justify-center gap-6 mt-6",children:[e.jsx(m,{onClick:()=>n("pass"),disabled:x,size:"lg",variant:"outline",className:"w-14 h-14 rounded-full border-2 border-red-400/60 hover:border-red-500 hover:bg-red-50 transition-all duration-200",children:e.jsx(A,{className:"h-6 w-6 text-red-500"})}),e.jsx(m,{onClick:()=>n("like"),disabled:x,size:"lg",className:"w-14 h-14 rounded-full bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700 text-white border-0 shadow-lg",children:e.jsx(w,{className:"h-6 w-6 fill-current"})})]})]})},xe=()=>{const{user:t,signOut:o}=E(),{dailyMatches:a,isLoading:s,generateDailyMatches:l,markAsViewed:g}=z(),h=d.useRef(!1),[p,j]=d.useState(0),[x,c]=d.useState([]);d.useEffect(()=>{t&&!h.current&&a.length===0&&!s&&(h.current=!0,l())},[t,a.length,s,l]);const u=N=>{const i=a[p];i&&(g(i.id),c(r=>[...r,i.id]),j(r=>r+1))},f=()=>{h.current=!1,j(0),c([]),l()},b=a.filter(N=>!x.includes(N.id)),n=b[0];return s?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading your daily matches..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex flex-col",children:[e.jsx("header",{className:"bg-black/20 backdrop-blur-xl border-b border-purple-500/20",children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(D,{to:"/dashboard",children:e.jsx("button",{className:"bg-slate-800/50 backdrop-blur-xl border border-slate-600/30 rounded-xl p-3 hover:bg-slate-700/50 transition-all",children:e.jsx(_,{className:"w-5 h-5 text-white"})})}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx(Y,{size:"md",showText:!0})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Daily Picks"}),e.jsx("p",{className:"text-purple-300 text-sm",children:"Curated executive matches"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-emerald-500/20 backdrop-blur-xl border border-emerald-500/30 rounded-xl px-4 py-2",children:[e.jsx(P,{className:"w-5 h-5 text-emerald-400"}),e.jsx("span",{className:"text-emerald-400 text-sm font-medium",children:"Basic"})]}),e.jsx("button",{onClick:o,className:"bg-slate-800/50 backdrop-blur-xl border border-slate-600/30 rounded-xl p-3 hover:bg-slate-700/50 transition-all",children:e.jsx($,{className:"w-5 h-5 text-white"})})]})]})})}),e.jsx("main",{className:"flex-1 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Your Daily Picks"}),e.jsx("p",{className:"text-gray-600",children:"Curated matches based on your compatibility score"})]}),e.jsxs(m,{onClick:f,disabled:s,className:"bg-purple-600 hover:bg-purple-700",children:[e.jsx(k,{className:`h-4 w-4 mr-2 ${s?"animate-spin":""}`}),"Refresh Matches"]})]})}),b.length===0?e.jsx(v,{className:"border-purple-200 text-center py-12",children:e.jsxs(y,{children:[e.jsx(w,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No Daily Matches Yet"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Complete your profile to get personalized daily match suggestions"}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx(D,{to:"/dashboard",children:e.jsx(m,{className:"bg-purple-600 hover:bg-purple-700",children:"Complete Profile"})}),e.jsxs(m,{onClick:f,variant:"outline",disabled:s,children:[e.jsx(k,{className:`h-4 w-4 mr-2 ${s?"animate-spin":""}`}),"Generate Matches"]})]})]})}):e.jsxs(e.Fragment,{children:[e.jsxs(v,{className:"border-purple-200 mb-8",children:[e.jsx(R,{children:e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-5 w-5 text-purple-600"}),"Today's Statistics"]})}),e.jsx(y,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:a.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Matches"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:b.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Remaining"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:x.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Viewed"})]})]})})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"relative w-full max-w-md",children:n?e.jsxs("div",{className:"relative",children:[e.jsx("p",{className:"text-center text-sm text-gray-600 mb-4",children:"Swipe left to pass, right to like!"}),e.jsx(B,{mode:"wait",children:e.jsx(U,{match:n,onSwipe:u},n.id)})]}):e.jsx(v,{className:"border-purple-200 text-center py-16",children:e.jsxs(y,{className:"space-y-6",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-purple-600 to-pink-600 rounded-full flex items-center justify-center mx-auto",children:e.jsx(w,{className:"h-10 w-10 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:"All caught up!"}),e.jsx("p",{className:"text-gray-600 mb-6 max-w-sm mx-auto",children:"You've viewed all your daily matches. Come back tomorrow for new suggestions!"})]}),e.jsxs(m,{onClick:f,className:"bg-purple-600 hover:bg-purple-700",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Get More Matches"]})]})})})})]})]})})]})};export{xe as default};
