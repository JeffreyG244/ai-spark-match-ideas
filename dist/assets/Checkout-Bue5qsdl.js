import{j as e}from"./vendor-ui-BOBT-NyQ.js";import{r as m}from"./vendor-LxWyOK1e.js";import{u as C,c as P}from"./vendor-router-hC09K-xx.js";import{u as w,B as o,H as k,b as d,c as g,d as y,e as u,j as S,l as j,s as E}from"./index-DNN11rcK.js";import{A as F}from"./arrow-left-dGaAc19p.js";import{S as L}from"./star-DzkWTCKw.js";import{C as A}from"./check-KER7PWwg.js";import{L as B}from"./loader-circle-DBw2VV_h.js";import{C as $}from"./credit-card-CDgv1eLx.js";import"./vendor-supabase-DciMRLNE.js";import"./vendor-query-BXVzPZ54.js";const x={plus:{name:"Plus",monthlyPrice:24.99,annualPrice:239.9,features:["Unlimited swipes","50 messaging credits","5 super likes per day","1 boost per month","Advanced filters","Rewind feature"],color:"#7C3AED",isPopular:!0},premium:{name:"Premium",monthlyPrice:49.99,annualPrice:479.9,features:["Everything in Plus","Unlimited messaging","Unlimited super likes","Unlimited boosts","See who likes you","Priority support","Incognito mode","Travel mode"],color:"#F59E0B",isPopular:!1}},K=()=>{const n=C(),[N]=P(),{user:c}=w(),[h,p]=m.useState(!1),[a,f]=m.useState("monthly"),r=N.get("plan");if(m.useEffect(()=>{if(!r||!x[r]){n("/membership");return}if(!c){n("/auth");return}},[r,c,n]),!r||!x[r])return null;const s=x[r],b=a==="annual"?s.annualPrice:s.monthlyPrice,i=a==="annual"?s.monthlyPrice*12-s.annualPrice:0,v=async()=>{if(!c){j.error("Please sign in to continue"),n("/auth");return}p(!0);try{const{data:t,error:l}=await E.functions.invoke("create-checkout",{body:{planType:r,billingCycle:a==="annual"?"yearly":"monthly"}});if(l)throw new Error(l.message||"Failed to create checkout session");if(t?.url)window.location.href=t.url;else throw new Error("No checkout URL received")}catch(t){const l=t instanceof Error?t.message:"Failed to start checkout process";j.error(l)}finally{p(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50",children:e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsxs(o,{onClick:()=>n("/membership"),variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(F,{className:"w-4 h-4"}),"Back to Plans"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-600 to-pink-600 rounded-xl flex items-center justify-center",children:e.jsx(k,{className:"h-6 w-6 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Luvlang Checkout"})]})]}),e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs(d,{className:`mb-6 ${s.isPopular?"border-2 border-purple-500 shadow-lg":"border-2 border-yellow-500 shadow-lg"}`,children:[s.isPopular&&e.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 z-10",children:e.jsxs("div",{className:"bg-purple-500 text-white px-3 py-1 rounded-full text-sm font-medium flex items-center gap-1",children:[e.jsx(L,{className:"w-3 h-3"}),"Most Popular"]})}),e.jsxs(g,{className:"text-center",children:[e.jsxs(y,{className:"text-3xl",style:{color:s.color},children:[s.name," Plan"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"text-4xl font-bold text-gray-900",children:["$",b.toFixed(2),e.jsxs("span",{className:"text-lg text-gray-500",children:["/",a==="annual"?"year":"month"]})]}),a==="annual"&&i>0&&e.jsxs("p",{className:"text-green-600 font-medium",children:["Save $",i.toFixed(2)," per year!"]})]})]}),e.jsx(u,{children:e.jsx("div",{className:"space-y-3",children:s.features.map((t,l)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-4 h-4 text-green-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:t})]},l))})})]}),e.jsxs(d,{className:"mb-6",children:[e.jsxs(g,{children:[e.jsx(y,{children:"Billing Cycle"}),e.jsx(S,{children:"Choose your preferred billing frequency"})]}),e.jsx(u,{children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(o,{onClick:()=>f("monthly"),variant:a==="monthly"?"default":"outline",className:"flex-1",style:{backgroundColor:a==="monthly"?s.color:void 0},children:["Monthly - $",s.monthlyPrice,"/month"]}),e.jsxs(o,{onClick:()=>f("annual"),variant:a==="annual"?"default":"outline",className:"flex-1",style:{backgroundColor:a==="annual"?s.color:void 0},children:["Annual - $",s.annualPrice,"/year",i>0&&e.jsxs("span",{className:"ml-2 text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:["Save $",i.toFixed(0)]})]})]})})]}),e.jsx(d,{children:e.jsxs(u,{className:"pt-6",children:[e.jsx(o,{onClick:v,disabled:h,className:"w-full text-lg py-6",style:{backgroundColor:s.color},children:h?e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"w-5 h-5 mr-2 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx($,{className:"w-5 h-5 mr-2"}),"Proceed to Payment"]})}),e.jsx("p",{className:"text-center text-sm text-gray-500 mt-4",children:"Secure payment powered by Stripe. Cancel anytime."})]})})]})]})})};export{K as default};
